<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Will you be my Valentine?</title>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

<style>
:root {
  --bg1: #ffd6e7;
  --bg2: #ffeef6;
  --card: #ffffffcc;
  --yes: #ff3b7a;
  --yesHover: #ff1f68;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  min-height: 100svh;
  display: grid;
  place-items: center;
  background: radial-gradient(circle at top, var(--bg2), var(--bg1));
  font-family: system-ui, sans-serif;
  overflow-x: hidden;
  padding: 16px;
}

#confettiCanvas { position: fixed; inset:0; pointer-events:none; z-index:9999; }

.card {
  width: min(720px, 92vw);
  padding: 26px 22px;
  background: var(--card);
  backdrop-filter: blur(10px);
  border-radius: 22px;
  text-align: center;
  box-shadow: 0 18px 60px rgba(0,0,0,.15);
  animation: fadeIn .6s ease;
}

@keyframes fadeIn { from { opacity:0; transform:translateY(20px); } to { opacity:1; transform:translateY(0); } }

h1 { font-size: clamp(26px, 4vw, 44px); margin:12px 0 18px; }
p { font-size: 18px; margin:10px 0 25px; }

.button-zone { position: relative; width: min(520px,92%); height:150px; margin:0 auto; touch-action: none; }

button {
  padding: 16px 24px;
  font-size: 18px;
  font-weight: 800;
  border-radius: 999px;
  border: none;
  cursor: pointer;
  box-shadow: 0 10px 24px rgba(0,0,0,.14);
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  transition: transform .12s ease, background .12s ease;
}

/* Intro buttons horizontal spacing */
#introScreen button { position: static; margin: 0; }

#yesBtn { position: absolute; top:50%; left:18%; transform: translateY(-50%); background: var(--yes); color:#fff; }
#yesBtn:hover { background: var(--yesHover); }
#noBtn { position: absolute; top:50%; left:62%; transform: translateY(-50%); background:#e5e7eb; color:#111827; }

.hint { margin-top: 10px; font-size: 13px; opacity:.7; }

.result { display: none; margin-top:18px; animation: pop .35s ease; }
.result h2 { font-size: clamp(30px, 4.5vw, 46px); margin:10px 0; }

@keyframes pop { from { transform: scale(.96); opacity:0; } to { transform: scale(1); opacity:1; } }

.gallery { margin-top: 20px; display: flex; justify-content: center; gap: 12px; }
.gallery img { width: 140px; border-radius: 14px; box-shadow:0 8px 18px rgba(0,0,0,.2); }
</style>
</head>

<body>
<canvas id="confettiCanvas"></canvas>

<audio id="bgMusic" src="music.mp3" loop></audio>

<main class="card">

<!-- INTRO SCREEN -->
<section id="introScreen">
  <h1>Hi Monks üíå</h1>
  <p>It is important that boys (you) feel special on girl holidays too and because you are so so special to me. I have a special question to ask you.<br>Would you like to proceed?</p>
  <div style="display:flex; justify-content:center; gap:24px; margin-top:20px;">
    <button id="introYes">Yes</button>
    <button id="introNo">No</button>
  </div>
</section>

<!-- VALENTINE SCREEN -->
<section id="valentineScreen" style="display:none;">
  <h1 id="valentineQuestion">Arnav, will you be my valentine?</h1>
  <section class="button-zone" id="zone">
    <button id="yesBtn">Yes</button>
    <button id="noBtn">No</button>
  </section>
  <div class="hint" id="hint">‚ÄúNo‚Äù seems a bit shy üòà</div>
</section>

<!-- RESULT SCREEN -->
<section id="result" class="result">
  <h2>I LOVE YOU!!! üíñ</h2>
  <div class="gallery">
    <img src="photo1.jpg" alt="">
    <img src="photo2.jpg" alt="">
    <img src="photo3.jpg" alt="">
  </div>
</section>

</main>

<script>
const introScreen = document.getElementById("introScreen");
const valentineScreen = document.getElementById("valentineScreen");
const introYes = document.getElementById("introYes");
const introNo = document.getElementById("introNo");
const music = document.getElementById("bgMusic");
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const result = document.getElementById("result");
const hint = document.getElementById("hint");

// CONFETTI
const confettiCanvas=document.getElementById("confettiCanvas");
const confettiInstance=confetti.create(confettiCanvas,{resize:false,useWorker:true});
function resizeConfettiCanvas(){
  const dpr=Math.max(1,window.devicePixelRatio||1);
  confettiCanvas.width=Math.floor(window.innerWidth*dpr);
  confettiCanvas.height=Math.floor(window.innerHeight*dpr);
  confettiCanvas.style.width="100vw";
  confettiCanvas.style.height="100vh";
}
window.addEventListener("resize",resizeConfettiCanvas);
resizeConfettiCanvas();
function fullScreenConfetti(){
  const end=Date.now()+1600;
  (function frame(){
    confettiInstance({particleCount:12,spread:90,startVelocity:45,ticks:180,origin:{x:Math.random(),y:Math.random()*0.3}});
    if(Date.now()<end) requestAnimationFrame(frame);
  })();
  setTimeout(()=>{ confettiInstance({particleCount:300,spread:140,startVelocity:60,ticks:220,origin:{x:0.5,y:0.55}}); },300);
}

// HELPER for No button
function clamp(n,min,max){ return Math.max(min,Math.min(max,n)); }
function moveNo(px,py){
  const zone=document.getElementById("zone");
  const z=zone.getBoundingClientRect();
  const b=noBtn.getBoundingClientRect();
  let dx=(b.left+b.width/2)-px;
  let dy=(b.top+b.height/2)-py;
  let mag=Math.hypot(dx,dy)||1;
  dx/=mag; dy/=mag;
  let newLeft=(b.left-z.left)+dx*150;
  let newTop=(b.top-z.top)+dy*150;
  newLeft=clamp(newLeft,0,z.width-b.width);
  newTop=clamp(newTop,0,z.height-b.height);
  noBtn.style.left=newLeft+"px";
  noBtn.style.top=newTop+"px";
  noBtn.style.transform="none";
}

// INTRO SCREEN LOGIC
introYes.addEventListener("click", ()=>{
  introScreen.style.display="none";
  valentineScreen.style.display="block";
  music.play().catch(()=>{});

  // Initialize No button position
  noBtn.style.left = "62%";
  noBtn.style.top = "50%";
  noBtn.style.transform = "translateY(-50%)";

  // Pointermove for runaway No
  const zone = document.getElementById("zone");
  zone.addEventListener("pointermove", e => {
    const b = noBtn.getBoundingClientRect();
    const d = Math.hypot((b.left+b.width/2)-e.clientX,(b.top+b.height/2)-e.clientY);
    if(d<140) moveNo(e.clientX,e.clientY);
  });
});

introNo.addEventListener("click", ()=>{ introNo.innerText="Are you sure? üò¢"; });

// VALENTINE YES CLICK
yesBtn.addEventListener("click", ()=>{
  valentineScreen.style.display="none";
  hint.style.display="none";
  result.style.display="block";
  resizeConfettiCanvas();
  fullScreenConfetti();
});

// Prevent clicking No
noBtn.addEventListener("click", e => e.preventDefault());
</script>
</body>
</html>
